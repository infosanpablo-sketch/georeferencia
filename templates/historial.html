{% extends "base.html" %}
{% block title %}Historial{% endblock %}
{% block body %}
<div class="container">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Historial de Asistencia</h3>
    <div>
      <a href="{{ url_for('admin') }}" class="btn btn-outline-secondary">Volver</a>
    </div>
  </div>

  <form method="get" class="row g-2 mb-3">
    <div class="col-8">
      <select name="mes" class="form-select">
        {% for m in meses %}<option value="{{ m }}" {% if m==mes_seleccionado %}selected{% endif %}>{{ m }}</option>{% endfor %}
      </select>
    </div>
    <div class="col-4"><button class="btn btn-primary w-100">Ver</button></div>
  </form>

  <div class="table-responsive">
    <table class="table table-bordered">
      <thead><tr><th>RUT</th><th>Nombre</th><th>Direcci√≥n</th><th>Fecha Local</th><th>Tipo</th></tr></thead>
      <tbody>
        {% for r in filas %}
          <tr>
            <td>{{ r.rut }}</td>
            <td>{{ r.nombre }}</td>
            <td>{{ r.address }}</td>
            <td>{{ r.display_ts }}</td>
            <td>{{ r.tipo }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% if filas|length == 0 %}
    <div class="alert alert-warning mt-3">No hay marcajes para este mes.</div>
  {% endif %}
</div>
{% endblock %}